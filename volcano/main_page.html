<!DOCTYPE html>
<html>
<head>
	<title>Volcano App</title>

	<script id="vertex-shader" type="x-shader/x-vertex">
	attribute vec2 vPosition;
	attribute vec4 vColor;

	attribute vec2 pPosition;
	attribute vec2 pVelocity;
	attribute vec2 pAcceleration;
	attribute float pStartFrame;

	uniform float uFrame;
	varying vec4 fColor;

	vec2 worldToNDC(vec2 w) {
		float x = 2.0 * (w.x / 10.0) - 1.0;
		float y = 2.0 * (w.y / 15.0) - 1.0;
		return vec2(x, y);
	}

	void main() {
		if (pStartFrame < 0.0) {
			// static volcano geometry
			gl_Position = vec4(vPosition, 0.0, 1.0);
			fColor = vColor;
		} else {
			float t = uFrame - pStartFrame;
			vec2 pos = pPosition + pVelocity * t + 0.5 * pAcceleration * t * t;
			vec2 ndc = worldToNDC(pos);
			gl_Position = vec4(ndc, 0.0, 1.0);
			fColor = vColor;
		}
		gl_PointSize = 4.0;
	}

	</script>

	<script id="fragment-shader" type="x-shader/x-fragment">
	precision mediump float;
	varying vec4 fColor;

	void main() {
		gl_FragColor = fColor;
	}
	</script>

	<script type="text/javascript" src="../common_files/utils.js"></script>
	<script type="text/javascript" src="./volcano.js"></script> 
</head>

<body>
	<canvas id="gl-canvas" width="512" height="512">
	Oops ... your browser doesn't support the HTML5 canvas element
	</canvas>
	<br>
	<button id="toggle-simulation">Start Simulation</button>
</body>
</html>
